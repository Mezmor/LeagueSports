{% extends 'drafter/_trifold.html' %}
{% block title %}LeagueSports - League List{% endblock %}

{% block center_banner %}
{% if user.is_authenticated %}
    <a href="{% url 'drafter.views.new_league' %}"><button type="button" class="btn btn-default">New League</button></a>
{% endif %}
{% endblock %}

{% block left_content %}
{% endblock %}
{% block center_content %}
    <ul id="leagues-tabs" class="nav nav-pills">
        <li class="active"><a href="#all-leagues" data-troggle="tab">All Leagues</a></li>
        {% if user.is_authenticated %}
            <li><a href="#my-leagues" data-troggle="tab">My Leagues</a></li>
            <li><a href="#commish-leagues" data-troggle="tab">Commish Leagues</a></li>
        {% endif %}
    </ul>
    <div class="tab-content">
	    <div class="table-responsive tab-pane active" id="all-leagues">
	        <table class="table table-striped table-bordered table-hover">
	            <thead>
	                <tr>
		                <th>League Name</th>
		                <th>Size</th>
		                <th>Commish</th>
	                </tr>
	            </thead>
	            
	            <tbody>
	                {% for league in all_leagues %}
	                    {% if league.public %}
			                <tr>
			                    <td><a href="{% url 'drafter.views.league' league.id %}">{{ league.name }}</a></td>
			                    <td>{{ league.size }}</td>
			                    <td>{{ league.commish }}</td>
			                </tr>
	                    {% endif %}
	                {% endfor %}
	            </tbody>
	        </table>
	    </div>
	    
	    {% if user.is_authenticated %}
		    <div class="table-responsive tab-pane" id="my-leagues">
	            <table class="table table-striped table-bordered table-hover">
	                <thead>
	                    <tr>
	                        <th>League Name</th>
	                        <th>Size</th>
	                        <th>Commish</th>
	                    </tr>
	                </thead>
	                
	                <tbody>
	                    {% for league in my_leagues %}
                            <tr>
                                <td><a href="{% url 'drafter.views.league' league.id %}">{{ league.name }}</a></td>
                                <td>{{ league.size }}</td>
                                <td>{{ league.commish }}</td>
                            </tr>
	                    {% endfor %}
	                </tbody>
	            </table>
	        </div>
        
	        <div class="table-responsive tab-pane" id="commish-leagues">
	            <table class="table table-striped table-bordered table-hover">
	                <thead>
	                    <tr>
	                        <th>League Name</th>
	                        <th>Size</th>
	                        <th>Commish</th>
	                    </tr>
	                </thead>
	                
	                <tbody>
	                    {% for league in commish_leagues %}
                            <tr>
                                <td><a href="{% url 'drafter.views.league' league.id %}">{{ league.name }}</a></td>
                                <td>{{ league.size }}</td>
                                <td>{{ league.commish }}</td>
                            </tr>
	                    {% endfor %}
	                </tbody>
	            </table>
	        </div>
	    {% endif %}
    </div>
    <script>
	$('#leagues-tabs a').click(function (e) {
	    e.preventDefault()
	    $(this).tab('show')
	});
	</script>
{% endblock %}
{% block right_content %}
{% endblock %}
